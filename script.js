const data = {
    "cars": [
        // SEDANES (8)
        {
            "id": "car_001",
            "brand": "Mercedes Benz",
            "model": "CLS350",
            "category": "sedanes",
            "price": 6500,
            "spawnCode": "cls500w219",
            "images": [
                "cls500w219.png",
                "cls500w2191.png"
            ]
        },
        {
            "id": "car_002",
            "brand": "Mercedes Benz",
            "model": "CLS53 AMG",
            "category": "sedanes",
            "price": 6500,
            "spawnCode": "cls19",
            "images": [
                "cls19.png",
                "cls191.png"
            ]
        },
        {
            "id": "car_003",
            "brand": "Audi",
            "model": "S8",
            "category": "sedanes",
            "price": 6500,
            "spawnCode": "audirs8",
            "images": [
                "audirs8.png",
                "audirs81.png"
            ]
        },
        {
            "id": "car_004",
            "brand": "BMW",
            "model": "Alpina B7",
            "category": "sedanes",
            "price": 6500,
            "spawnCode": "alpinab7",
            "images": [
                "alpinab7.png",
                "alpinab71.png"
            ]
        },
        {
            "id": "car_005",
            "brand": "Audi",
            "model": "Q4",
            "category": "sedanes",
            "price": 6500,
            "spawnCode": "AAQ4",
            "images": [
                "AAQ4.png",
                "AAQ41.png"
            ]
        },
        {
            "id": "car_006",
            "brand": "Mercedez Benz",
            "model": "CLA 45",
            "category": "sedanes",
            "price": 6500,
            "spawnCode": "2020CLA45s",
            "images": [
                "2020CLA45s.png",
                "2020CLA45s1.png"
            ]
        },
        {
            "id": "car_007",
            "brand": "BMW",
            "model": "M5",
            "category": "sedanes",
            "price": 6500,
            "spawnCode": "2019m5",
            "images": [
                "2019m5.png",
                "2019m51.png"
            ]
        },
        {
            "id": "car_008",
            "brand": "Audi",
            "model": "RS7",
            "category": "sedanes",
            "price": 6500,
            "spawnCode": "18rs7",
            "images": [
                "18rs7.png",
                "18rs71.png"
            ]
        },

        // SUVS (8)
        {
            "id": "car_009",
            "brand": "Jeep",
            "model": "Wrangler",
            "category": "suvs",
            "price": 6500,
            "spawnCode": "2022jeep",
            "images": [
                "2022jeep.png",
                "2022jeep1.png"
            ]
        },
        {
            "id": "car_010",
            "brand": "Mercedes Benz",
            "model": "AMG G 63",
            "category": "suvs",
            "price": 6500,
            "spawnCode": "22g63",
            "images": [
                "22g63.png",
                "22g631.png"
            ]
        },
        {
            "id": "car_011",
            "brand": "Cadillac",
            "model": "Escalate",
            "category": "suvs",
            "price": 6500,
            "spawnCode": "escaladeprime",
            "images": [
                "escaladeprime.png",
                "escaladeprime1.png"
            ]
        },
        {
            "id": "car_012",
            "brand": "Mercedes Benz",
            "model": "AMG G63C",
            "category": "suvs",
            "price": 6500,
            "spawnCode": "g63c",
            "images": [
                "g63c.png",
                "g63c1.png"
            ]
        },
        {
            "id": "car_013",
            "brand": "Mercedes Benz",
            "model": "G65",
            "category": "suvs",
            "price": 6500,
            "spawnCode": "g65",
            "images": [
                "g65.png",
                "g651.png"
            ]
        },
        {
            "id": "car_014",
            "brand": "Brabus",
            "model": "g700",
            "category": "suvs",
            "price": 6500,
            "spawnCode": "g700brabusretuned",
            "images": [
                "g700brabusretuned.png",
                "g700brabusretuned1.png"
            ]
        },
        {
            "id": "car_015",
            "brand": "Hummer",
            "model": "h2",
            "category": "suvs",
            "price": 6500,
            "spawnCode": "h2m",
            "images": [
                "h2m.png",
                "h2m1.png"
            ]
        },
        {
            "id": "car_016",
            "brand": "Mercedes Benz",
            "model": "GL63",
            "category": "suvs",
            "price": 6500,
            "spawnCode": "GL63",
            "images": [
                "GL63.png",
                "GL631.png"
            ]
        },

        // PICK UP (8)
        {
            "id": "car_017",
            "brand": "Jeep",
            "model": "Gladiator",
            "category": "pickup",
            "price": 6500,
            "spawnCode": "rmodjeepg",
            "images": [
                "rmodjeepg.png",
                "rmodjeepg1.png"
            ]
        },
        {
            "id": "car_018",
            "brand": "Ford",
            "model": "Ranger",
            "category": "pickup",
            "price": 6500,
            "spawnCode": "rapger19",
            "images": [
                "rapger19.png",
                "rapger191.png"
            ]
        },
        {
            "id": "car_019",
            "brand": "Dodge",
            "model": "RAM 1500 TRX",
            "category": "pickup",
            "price": 6500,
            "spawnCode": "ramtrx6x6",
            "images": [
                "ramtrx6x6.png",
                "ramtrx6x61.png"
            ]
        },
        {
            "id": "car_020",
            "brand": "Ford",
            "model": "f-350 Super Duty",
            "category": "pickup",
            "price": 6500,
            "spawnCode": "madf350lift",
            "images": [
                "madf350lift.png",
                "madf350lift1.png"
            ]
        },
        {
            "id": "car_021",
            "brand": "Dodge",
            "model": "Ram 1500",
            "category": "pickup",
            "price": 6500,
            "spawnCode": "gcram1500",
            "images": [
                "gcram1500.png",
                "gcram15001.png"
            ]
        },
        {
            "id": "car_022",
            "brand": "Toyota",
            "model": "Tundra",
            "category": "pickup",
            "price": 6500,
            "spawnCode": "19gv80",
            "images": [
                "19gv80.png",
                "19gv801.png"
            ]
        },
        {
            "id": "car_023",
            "brand": "GMC",
            "model": "Sierra",
            "category": "pickup",
            "price": 6500,
            "spawnCode": "21sierra",
            "images": [
                "21sierra.png",
                "21sierra1.png"
            ]
        },
        {
            "id": "car_024",
            "brand": "Dodge",
            "model": "RAM TRX",
            "category": "pickup",
            "price": 6500,
            "spawnCode": "1500ghoul",
            "images": [
                "1500ghoul.png",
                "1500ghoul1.png"
            ]
        },

        // DEPORTIVOS (8)
        {
            "id": "car_025",
            "brand": "BMW",
            "model": "Z4",
            "category": "deportivos",
            "price": 6500,
            "spawnCode": "DLZ4",
            "images": [
                "DLZ4.png",
                "DLZ41.png"
            ]
        },
        {
            "id": "car_026",
            "brand": "Ford",
            "model": "Mustang RTR",
            "category": "deportivos",
            "price": 6500,
            "spawnCode": "manssupersnake",
            "images": [
                "manssupersnake.png",
                "manssupersnake1.png"
            ]
        },
        {
            "id": "car_027",
            "brand": "Nissan",
            "model": "Nismo",
            "category": "deportivos",
            "price": 6500,
            "spawnCode": "nismo20",
            "images": [
                "nismo20.png",
                "nismo201.png"
            ]
        },
        {
            "id": "car_028",
            "brand": "Honda",
            "model": "NSX",
            "category": "deportivos",
            "price": 6500,
            "spawnCode": "nsx17",
            "images": [
                "nsx17.png",
                "nsx171.png"
            ]
        },
        {
            "id": "car_029",
            "brand": "Porshe",
            "model": "911",
            "category": "deportivos",
            "price": 6500,
            "spawnCode": "porche911speedhunter",
            "images": [
                "porche911speedhunter.png",
                "porche911speedhunter1.png"
            ]
        },
        {
            "id": "car_030",
            "brand": "Audi",
            "model": "R8",
            "category": "deportivos",
            "price": 6500,
            "spawnCode": "r8beastedit",
            "images": [
                "r8beastedit.png",
                "r8beastedit1.png"
            ]
        },
        {
            "id": "car_031",
            "brand": "Nissan",
            "model": "GTR",
            "category": "deportivos",
            "price": 6500,
            "spawnCode": "rmodgtr",
            "images": [
                "rmodgtr.png",
                "rmodgtr1.png"
            ]
        },
        {
            "id": "car_032",
            "brand": "Nissan",
            "model": "Skyline",
            "category": "deportivos",
            "price": 6500,
            "spawnCode": "rmodskyline34",
            "images": [
                "rmodskyline34.png",
                "rmodskyline341.png"
            ]
        },

        // SUPERDEPORTIVOS (8)
        {
            "id": "car_033",
            "brand": "Ferrari",
            "model": "LaFerrari",
            "category": "superdeportivos",
            "price": 6500,
            "spawnCode": "gta5rp_veh_ferrari19",
            "images": [
                "gta5rp_veh_ferrari19.png",
                "gta5rp_veh_ferrari191.png"
            ]
        },
        {
            "id": "car_034",
            "brand": "Lamborghini",
            "model": "Aventador",
            "category": "superdeportivos",
            "price": 6500,
            "spawnCode": "gcmlamboultimae",
            "images": [
                "gcmlamboultimae.png",
                "gcmlamboultimae1.png"
            ]
        },
        {
            "id": "car_035",
            "brand": "Ferrari",
            "model": "FXX",
            "category": "superdeportivos",
            "price": 6500,
            "spawnCode": "fxxkevo",
            "images": [
                "fxxkevo.png",
                "fxxkevo1.png"
            ]
        },
        {
            "id": "car_036",
            "brand": "Ferrari",
            "model": "488",
            "category": "superdeportivos",
            "price": 6500,
            "spawnCode": "488sp",
            "images": [
                "488sp.png",
                "488sp1.png"
            ]
        },
        {
            "id": "car_037",
            "brand": "Lamborghini",
            "model": "Revuelto",
            "category": "superdeportivos",
            "price": 6500,
            "spawnCode": "amrevu23mg",
            "images": [
                "amrevu23mg.png",
                "amrevu23mg1.png"
            ]
        },
        {
            "id": "car_038",
            "brand": "Bugatti",
            "model": "Chiron",
            "category": "superdeportivos",
            "price": 6500,
            "spawnCode": "chironspeedhunter",
            "images": [
                "chironspeedhunter.png",
                "chironspeedhunter1.png"
            ]
        },
        {
            "id": "car_039",
            "brand": "Bugatti",
            "model": "Chiron Super",
            "category": "superdeportivos",
            "price": 6500,
            "spawnCode": "chironsuper",
            "images": [
                "chironsuper.png",
                "chironsuper1.png"
            ]
        },
        {
            "id": "car_040",
            "brand": "Ford",
            "model": "GT",
            "category": "superdeportivos",
            "price": 6500,
            "spawnCode": "gt17",
            "images": [
                "gt17.png",
                "gt171.png"
            ]
        },

        // MOTOS (8)
        {
            "id": "car_041",
            "brand": "Harley Davidson",
            "model": "Breakout",
            "category": "motos",
            "price": 6500,
            "spawnCode": "claw",
            "images": [
                "claw.png",
                "claw1.png"
            ]
        },
        {
            "id": "car_042",
            "brand": "Honda",
            "model": "CB650R",
            "category": "motos",
            "price": 6500,
            "spawnCode": "cb650r",
            "images": [
                "cb650r.png",
                "cb650r1.png"
            ]
        },
        {
            "id": "car_043",
            "brand": "Yamaha",
            "model": "Aerox",
            "category": "motos",
            "price": 6500,
            "spawnCode": "aerox155",
            "images": [
                "aerox155.png",
                "aerox1551.png"
            ]
        },
        {
            "id": "car_044",
            "brand": "Yamaha",
            "model": "Raptor",
            "category": "motos",
            "price": 6500,
            "spawnCode": "GGbanshee",
            "images": [
                "GGbanshee.png",
                "GGbanshee1.png"
            ]
        },
        {
            "id": "car_045",
            "brand": "BMW",
            "model": "S100RR",
            "category": "motos",
            "price": 6500,
            "spawnCode": "GODzBMWS100RR",
            "images": [
                "GODzBMWS100RR.png",
                "GODzBMWS100RR1.png"
            ]
        },
        {
            "id": "car_046",
            "brand": "Kawazaki",
            "model": "Ninja H2",
            "category": "motos",
            "price": 6500,
            "spawnCode": "GODzNINJAH2",
            "images": [
                "GODzNINJAH2.png",
                "GODzNINJAH21.png"
            ]
        },
        {
            "id": "car_047",
            "brand": "BMW",
            "model": "S100",
            "category": "motos",
            "price": 6500,
            "spawnCode": "km100rr",
            "images": [
                "km100rr.png",
                "km100rr1.png"
            ]
        },
        {
            "id": "car_048",
            "brand": "Kawazaki",
            "model": "ZX",
            "category": "motos",
            "price": 6500,
            "spawnCode": "kawagala",
            "images": [
                "kawagala.png",
                "kawagala1.png"
            ]
        }
    ]
};

document.addEventListener('DOMContentLoaded', function() {
    // Initialize carousels and load data
    loadCars();
    loadHouses();
    loadBusinesses();
    
    // Set up filter buttons
    setupFilters();
    
    // Initialize copy buttons
    document.addEventListener('click', function(e) {
        if (e.target.closest('.copy-btn')) {
            const card = e.target.closest('.card');
            const spawnCode = card.dataset.spawnCode;
            copyToClipboard(spawnCode);
            showToast('¡Código copiado!');
        }
    });
});

function loadCars(filter = 'all') {
    const carGrid = document.getElementById('car-grid');
    carGrid.innerHTML = '';
    
    let carsToShow = data.cars;
    if (filter !== 'all') {
        carsToShow = data.cars.filter(car => car.category === filter);
    }
    
    carsToShow.forEach(car => {
        const carCard = createCarCard(car);
        carGrid.appendChild(carCard);
        
        // Initialize carousel for this card if multiple images
        if (car.images.length > 1) {
            initCarousel(carCard, car.images);
        }
    });
}

function loadHouses() {
    const houseGrid = document.getElementById('house-grid');
    houseGrid.innerHTML = '';
    
    data.houses.forEach(house => {
        const houseCard = createHouseCard(house);
        houseGrid.appendChild(houseCard);
        
        // Initialize carousel for this card if multiple images
        if (house.images.length > 1) {
            initCarousel(houseCard, house.images);
        }
    });
}

function loadBusinesses() {
    const businessGrid = document.getElementById('business-grid');
    businessGrid.innerHTML = '';
    
    data.businesses.forEach(business => {
        const businessCard = createBusinessCard(business);
        businessGrid.appendChild(businessCard);
        
        // Initialize carousel for this card if multiple images
        if (business.images.length > 1) {
            initCarousel(businessCard, business.images);
        }
    });
}

function createCarCard(car) {
    const card = document.createElement('div');
    card.className = 'card';
    card.dataset.category = car.category;
    card.dataset.spawnCode = car.spawnCode;
    
    const badgeClass = car.category === 'superdeportivos' ? 'badge-luxury' : 
                      car.category === 'motos' ? 'badge-exclusive' : 'badge-premium';
    const badgeText = car.category === 'superdeportivos' ? 'Lujo' : 
                     car.category === 'motos' ? 'Exclusivo' : 'Premium';
    
    card.innerHTML = `
        <div class="card-img-container">
            ${car.images.map((img, index) => 
                `<img src="${img}" class="card-img ${index === 0 ? 'opacity-100' : 'opacity-0'}" data-index="${index}">`
            ).join('')}
            <div class="card-dots">
                ${car.images.map((_, index) => 
                    `<div class="card-dot ${index === 0 ? 'active' : ''}" data-index="${index}"></div>`
                ).join('')}
            </div>
            <div class="absolute top-4 right-4">
                <span class="${badgeClass} badge">${badgeText}</span>
            </div>
        </div>
        <div class="p-6">
            <div class="flex justify-between items-start">
                <div>
                    <h3 class="text-2xl font-bold text-gray-900">${car.brand}</h3>
                    <p class="text-gray-600">${car.model}</p>
                </div>
                <div class="copy-btn" title="Copiar código de spawn">
                    <i data-feather="copy" class="w-4 h-4"></i>
                </div>
            </div>
            <div class="mt-4 flex justify-between items-center">
                <span class="price">$${car.price.toLocaleString()}</span>
                <span class="text-sm text-gray-500">${car.category.charAt(0).toUpperCase() + car.category.slice(1)}</span>
            </div>
        </div>
    `;
    
    return card;
}

function createHouseCard(house) {
    const card = document.createElement('div');
    card.className = 'card';
    
    const badgeClass = house.badge === 'luxury' ? 'badge-luxury' : 
                      house.badge === 'exclusive' ? 'badge-exclusive' : 'badge-premium';
    
    card.innerHTML = `
        <div class="card-img-container">
            ${house.images.map((img, index) => 
                `<img src="${img}" class="card-img ${index === 0 ? 'opacity-100' : 'opacity-0'}" data-index="${index}">`
            ).join('')}
            <div class="card-dots">
                ${house.images.map((_, index) => 
                    `<div class="card-dot ${index === 0 ? 'active' : ''}" data-index="${index}"></div>`
                ).join('')}
            </div>
            <div class="absolute top-4 right-4">
                <span class="${badgeClass} badge">${house.badge.charAt(0).toUpperCase() + house.badge.slice(1)}</span>
            </div>
        </div>
        <div class="p-6">
            <h3 class="text-2xl font-bold text-gray-900">${house.type}</h3>
            <p class="text-gray-600 mt-1">${house.location}</p>
            <div class="mt-4">
                <span class="price">$${house.price.toLocaleString()}</span>
            </div>
        </div>
    `;
    
    return card;
}

function createBusinessCard(business) {
    const card = document.createElement('div');
    card.className = 'card';
    
    const badgeClass = business.badge === 'luxury' ? 'badge-luxury' : 
                      business.badge === 'exclusive' ? 'badge-exclusive' : 'badge-premium';
    
    card.innerHTML = `
        <div class="card-img-container">
            ${business.images.map((img, index) => 
                `<img src="${img}" class="card-img ${index === 0 ? 'opacity-100' : 'opacity-0'}" data-index="${index}">`
            ).join('')}
            <div class="card-dots">
                ${business.images.map((_, index) => 
                    `<div class="card-dot ${index === 0 ? 'active' : ''}" data-index="${index}"></div>`
                ).join('')}
            </div>
            <div class="absolute top-4 right-4">
                <span class="${badgeClass} badge">${business.badge.charAt(0).toUpperCase() + business.badge.slice(1)}</span>
            </div>
        </div>
        <div class="p-6">
            <h3 class="text-2xl font-bold text-gray-900">${business.type}</h3>
            <p class="text-gray-600 mt-1">${business.location}</p>
            <div class="mt-4">
                <span class="price">$${business.price.toLocaleString()}</span>
            </div>
        </div>
    `;
    
    return card;
}

function initCarousel(card, images) {
    const imgContainer = card.querySelector('.card-img-container');
    const imagesEl = card.querySelectorAll('.card-img');
    const dots = card.querySelectorAll('.card-dot');
    let currentIndex = 0;
    let interval;
    
    // Start carousel on hover
    imgContainer.addEventListener('mouseenter', () => {
        if (images.length > 1) {
            interval = setInterval(() => {
                nextImage();
            }, 2000);
        }
    });
    
    // Stop carousel on mouse leave
    imgContainer.addEventListener('mouseleave', () => {
        clearInterval(interval);
        resetToFirstImage();
    });
    
    function nextImage() {
        imagesEl[currentIndex].classList.remove('opacity-100');
        imagesEl[currentIndex].classList.add('opacity-0');
        dots[currentIndex].classList.remove('active');
        
        currentIndex = (currentIndex + 1) % images.length;
        
        imagesEl[currentIndex].classList.remove('opacity-0');
        imagesEl[currentIndex].classList.add('opacity-100');
        dots[currentIndex].classList.add('active');
    }
    
    function resetToFirstImage() {
        imagesEl[currentIndex].classList.remove('opacity-100');
        imagesEl[currentIndex].classList.add('opacity-0');
        dots[currentIndex].classList.remove('active');
        
        currentIndex = 0;
        
        imagesEl[currentIndex].classList.remove('opacity-0');
        imagesEl[currentIndex].classList.add('opacity-100');
        dots[currentIndex].classList.add('active');
    }
}

function setupFilters() {
    const filterButtons = document.querySelectorAll('.filter-btn');
    
    filterButtons.forEach(button => {
        button.addEventListener('click', () => {
            // Update active state
            filterButtons.forEach(btn => {
                btn.classList.remove('active', 'bg-gradient-to-r', 'from-cyan-500', 'to-purple-500', 'text-white', 'shadow-lg', 'shadow-cyan-500/20');
                btn.classList.add('bg-white/80', 'backdrop-blur-sm', 'border', 'border-gray-200');
            });
            
            button.classList.add('active', 'bg-gradient-to-r', 'from-cyan-500', 'to-purple-500', 'text-white', 'shadow-lg', 'shadow-cyan-500/20');
            button.classList.remove('bg-white/80', 'backdrop-blur-sm', 'border', 'border-gray-200');
            
            // Filter cars
            const category = button.dataset.category;
            loadCars(category);
        });
    });
}

function copyToClipboard(text) {
    navigator.clipboard.writeText(text).then(() => {
        console.log('Copied to clipboard');
    }).catch(err => {
        console.error('Failed to copy: ', err);
    });
}

function showToast(message) {
    const toast = document.getElementById('toast');
    const toastMessage = document.getElementById('toast-message');
    
    toastMessage.textContent = message;
    toast.classList.remove('hidden');
    toast.classList.add('toast-show');
    
    setTimeout(() => {
        toast.classList.remove('toast-show');
        toast.classList.add('toast-hide');
        
        setTimeout(() => {
            toast.classList.add('hidden');
            toast.classList.remove('toast-hide');
        }, 300);
    }, 200);
}

